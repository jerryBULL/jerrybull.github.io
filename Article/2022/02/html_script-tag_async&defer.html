<!DOCTYPE html>
<html lang="zh-Hant-TW">
    <head>
        <meta charset="UTF-8" />
        <title>Html script tag裡的async&defer用意-Jerry的學習筆記</title>
        <meta name="description" content="紀錄Html script tag裡的async&defer用意"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="/Content/img/favicon.ico" type="image/x-icon">
        <!-- jquery-confirm start -->
        <link rel="stylesheet" href="/Content/css/lib/jquery-confirm/bundled.css" />
        <link rel="stylesheet" href="/Content/css/lib/jquery-confirm/jquery-confirm.min.css" />
        <!-- jquery-confirm end -->
        <link rel="stylesheet" href="/Content/css/lib/lightbox/lightbox.min.css" />
        <link rel="stylesheet" href="/Content/css/lib/run_prettify/run_prettify.css" />
        <link rel="stylesheet" href="/Content/css/common.css" />
        <link rel="stylesheet" href="/Content/css/style.css" />

        <script src="/Content/js/lib/vue.js"></script>
        <script src="/Content/js/lib/httpVueLoader.js"></script>
        <script src="/Content/js/lib/jquery-3.5.1.min.js"></script>
        <script src="/Content/js/lib/jquery-confirm/jquery-confirm.min.js"></script>
        <script src="/Content/js/lib/lightbox.js"></script>
        <script src="/Content/js/lib/run_prettify.js"></script>
        <script src="/Content/js/function.js"></script>
        <script src="/Content/js/ArticleList/ArticleList.js"></script>
        <script src="/Content/js/ArticleList/ArticleTag.js"></script>
        <script src="/Content/js/ArticleList/ArticleCategory.js"></script>
        <script src="/Content/js/ArticleList/ArticleFuntion.js"></script>

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-J1KMGN3SP6"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-J1KMGN3SP6');
        </script>
    </head>
    <body>
        <header></header>
        <div class="body" v-cloak>
            <div class="content">
                <div class="article">
                    <article-header :article_tag="ArticleTag" :current_article="CurrentArticle"></article-header>
                    <div class="article__content">

                        <!-- 文章內容 start -->
                        <p class="article__title-heading1">正文開始</p>
                        <p class="article__title-heading2">不加 async & defer 時</p>
<pre class="prettyprint language-js linenums">
&lt;script src="略..."&gt;&lt;/script&gt;
</pre>
                        <div class="spaceH0_75"></div>
                        <ul class="article__ul-circle">
                            <li>瀏覽器讀到 &lt;script&gt; 時，便會暫停解析 DOM，立刻開始下載 &lt;script&gt; 的資源，並在下載後立刻執行。</li>
                            <li>會中斷 DOM 元素載入，載入並執行完 JS 在繼續。</li>
                        </ul>
                        <a href="/Content/img/Article/2022/02/HTML_script-tag_async&defer/img01.PNG" data-lightbox="image-1" data-title="不加async&defer時的示意圖">
                            <img class="article_img" src="/Content/img/Article/2022/02/HTML_script-tag_async&defer/img01.PNG" alt="不加async&defer時的示意圖">
                        </a>
                        <div class="spaceH0_75"></div>

                        <p class="article__title-heading2">加 async 時</p>
<pre class="prettyprint language-html linenums">
&lt;script async src="略..."&gt;&lt;/script&gt;
</pre>
                        <div class="spaceH0_75"></div>
                        <ul class="article__ul-circle">
                            <li>加入 <span class="article__mark">async</span> 是讓 JS 檔案非同步載入後執行，但如果有多個 &lt;script&gt; 不保證執行的先後順序。</li>
                            <li>背景載入 JS，載入完成中斷 DOM 並執行，結束再繼續載入 DOM。</li>
                        </ul>
                        <a href="/Content/img/Article/2022/02/HTML_script-tag_async&defer/img02.PNG" data-lightbox="image-1" data-title="加async時的示意圖">
                            <img class="article_img" src="/Content/img/Article/2022/02/HTML_script-tag_async&defer/img02.PNG" alt="加async時的示意圖">
                        </a>
                        <div class="spaceH0_75"></div>

                        <p class="article__title-heading2">加 defer 時</p>
<pre class="prettyprint language-js linenums">
&lt;script defer src="略..."&gt;&lt;/script&gt;
</pre>
                        <div class="spaceH0_75"></div>
                        <ul class="article__ul-circle">
                            <li>加入 <span class="article__mark">defer</span> 是讓 JS 檔案非同步載入，並且等整份 HTML 文件解析完後才會執行，同時 defer 也會保證執行的先後順序是依照不同 &lt;script&gt; 的先後順序。</li>
                            <li>背景載入 JS，於 DOM 載入完後執行。</li>
                        </ul>
                        <a href="/Content/img/Article/2022/02/HTML_script-tag_async&defer/img03.PNG" data-lightbox="image-1" data-title="加defer時的示意圖">
                            <img class="article_img" src="/Content/img/Article/2022/02/HTML_script-tag_async&defer/img03.PNG" alt="加defer時的示意圖">
                        </a>
                        <div class="spaceH0_75"></div>

                        <p class="article__title-heading2">總結</p>
                            <p>defer 由於背景載入、不打斷渲染及確保執行順序的特色，基本上沒特別需求的話，&lt;script&gt; 都設定一下。</p>
                            <p>async 下載後會立刻執行，一般常見的應用是設定在完全獨立的功能，例如 GA、頁面廣告等等，在避免造成使用者體驗變差的同時，盡量提早開始產生效果。</p>
                        <div class="spaceH0_75"></div>

                        <p class="article__title-heading1">參考文章</p>
                        <ul class="article__ul-number">
                            <li>
                                <a class="article__link" target="_blank" href="https://medium.com/schaoss-blog/02-html-script-tag-%E5%8A%A0%E4%B8%8A-async-defer-%E7%9A%84%E5%8A%9F%E8%83%BD%E5%8F%8A%E5%B7%AE%E7%95%B0-8205fddbbafc">前端三十｜02. [HTML] script tag 加上 async & defer 的功能及差異？</a>
                            </li>
                            <li>
                                <a class="article__link" target="_blank" href="https://medium.com/%E4%B8%80%E5%80%8B%E5%B0%8F%E5%B0%8F%E5%B7%A5%E7%A8%8B%E5%B8%AB%E7%9A%84%E9%9A%A8%E6%89%8B%E7%AD%86%E8%A8%98/html5-script-tag-%E6%96%B0%E5%A2%9E%E7%9A%84%E5%B1%AC%E6%80%A7-async-defer-%E5%B7%AE%E7%95%B0-2d02b49658e3">[HTML5] script Tag 新增的屬性：async, defer 差異</a>
                            </li>
                        </ul>
                        <!-- 文章內容 end -->

                    </div>
                </div>
            </div>
            <sidebar-component :article_tag="ArticleTag" :article="Article" :article_tag="ArticleTag"><sidebar-component>
        </div>
        <footer></footer>
    </body>
</html>